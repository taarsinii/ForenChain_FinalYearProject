<h2>Manage Users</h2>

<form action="/admin/audit-logs" method="GET">
    <button style="
        padding:8px 15px;
        background:#007bff;
        color:white;
        border:none;
        border-radius:5px;
        cursor:pointer;
    ">
        View Audit Logs
    </button>
</form>

<form action="/admin/users/add" method="POST">
    <input type="text" name="username" placeholder="Username" required>
    <input type="text" name="full_name" placeholder="Full Name" required>
    <input type="password" name="password" placeholder="Password" required>

    <select name="role">
        <option value="administrator">Admin</option>
        <option value="investigator">Investigator</option>
        <option value="supervisor">Supervisor</option>
        <option value="analyst">Analyst</option>
        <option value="prosecutor">Prosecutor</option>
    </select>

    <button type="submit">Add User</button>
</form>

<hr>

<table>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Role</th>
        <th>Username</th>
        <th>Actions</th>
    </tr>

    <% users.forEach(user=> { %>
        <tr>
            <td>
                <%= user.user_id %>
            </td>
            <td>
                <%= user.full_name %>
            </td>
            <td>
                <%= user.role %>
            </td>
            <td>
                <%= user.username %>
            </td>
            <td>
                <form action="/admin/users/edit/<%= user.user_id %>" method="POST">
                    <input type="text" name="username" value="<%= user.username %>">
                    <input type="text" name="full_name" value="<%= user.full_name %>">
                    <select name="role">
                        <option <%=user.role=='administrator' ?'selected':'' %> value="administrator">Admin</option>
                        <option <%=user.role=='investigator' ?'selected':'' %> value="investigator">Investigator
                        </option>
                        <option <%=user.role=='supervisor' ?'selected':'' %> value="supervisor">Supervisor</option>
                        <option <%=user.role=='analyst' ?'selected':'' %> value="analyst">Analyst</option>
                        <option <%=user.role=='prosecutor' ?'selected':'' %> value="prosecutor">Prosecutor</option>
                    </select>
                    <button type="submit">Save</button>
                </form>

                <form action="/admin/users/delete/<%= user.user_id %>" method="POST">
                    <button type="submit" style="color:red">Delete</button>
                </form>
            </td>
        </tr>
        <% }) %>
</table>